(this.webpackJsonpbookclub=this.webpackJsonpbookclub||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var s=n(4),i=n(5),r=n.n(i),a=n(41),c=n.n(a),l=(n(80),n(22)),o=n(14),d=n(20),j=n.n(d),u=n(34),b=n(30),h=n(31),p=n(33),x=n(32),O=n(74),m=n(8),f=(n(83),{apiKey:"AIzaSyBqtnG636jIrQnGaGFnWYhCqkGUavLmdfo",authDomain:"bookclub-4b029.firebaseapp.com",projectId:"bookclub-4b029",storageBucket:"bookclub-4b029.appspot.com",messagingSenderId:"995047942413",appId:"1:995047942413:web:82ba04356925a88c86a844"});m.a.initializeApp(f);var g=n(47),v=n(48),y=function(e){var t=e.children,n=e.label,i=e.props,r=e.formikKey;return Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:n}),t,Object(s.jsx)("p",{children:i.touched[r]&&i.errors[r]})]})},k=function(e){var t=e.label,n=e.props,i=e.formikKey,r=Object(v.a)(e,["label","props","formikKey"]);return Object(s.jsx)(y,{label:t,formikKey:i,props:n,children:Object(s.jsx)("input",Object(g.a)({onChange:n.handleChange(i),onBlur:n.handleBlur(i)},r))})},w=function(e){var t=e.label,n=e.props,i=e.formikKey,r=Object(v.a)(e,["label","props","formikKey"]);return Object(s.jsx)(y,{label:t,formikKey:i,props:n,children:Object(s.jsx)("input",Object(g.a)({type:"password",onChange:n.handleChange(i),onBlur:n.handleBlur(i)},r))})},S=function(e){var t=e.label,n=e.props,i=e.formikKey,r=Object(v.a)(e,["label","props","formikKey"]);return Object(s.jsx)(y,{label:t,formikKey:i,props:n,children:Object(s.jsx)("textarea",Object(g.a)({style:{overflowWrap:"break-word"},onChange:n.handleChange(i),onBlur:n.handleBlur(i)},r))})},I=n(24);var C=n(28);var U=function(e){var t=e.filmId,n=e.userId;return Object(s.jsx)(I.a,{initialValues:{comment:""},onSubmit:function(e){n?(!function(e,t,n,s){var i=m.a.database().ref("/films/"+n+"/comments/").push().key;m.a.database().ref("/films/"+n+"/comments/"+i).set({comment:e.comment,date:s,username:t,id:i})}(e,n,t,(new Date).toDateString()),console.log(t)):window.alert("Please log in to comment!")},children:function(e){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)("div",{style:{paddingTop:"5px"},children:[Object(s.jsx)(S,{props:e,formikKey:"comment",placeholder:"Write comment..."}),Object(s.jsx)("button",{style:{height:"30px"},onClick:e.handleSubmit,children:"Comment"})]})})}})};function K(e,t){m.a.database().ref("/films/"+e+"/comments/"+t).remove()}function F(e){m.a.database().ref("/films/"+e).update({comments:0})}var T=function(e){var t=e.comments,n=e.signedInUser,i=e.filmId;return Object(s.jsx)("div",{children:t.map((function(e){var r="none";n===e.username&&(r=" ");var a=Object(s.jsx)("div",{style:{cursor:"point",display:r},onClick:K.bind(null,i,e.id),children:Object(s.jsx)(C.c,{icon:"minus",size:"1x"})});return 1===t.length&&(a=Object(s.jsx)("div",{style:{cursor:"point",display:r},onClick:F.bind(null,i),children:Object(s.jsx)(C.c,{icon:"minus",size:"1x"})})),Object(s.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(s.jsxs)("p",{children:[e.comment,Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{children:e.date}),Object(s.jsx)("span",{style:{float:"right"},children:Object(s.jsx)("b",{children:Object(s.jsxs)("i",{children:["- ",e.username]})})})]}),a,Object(s.jsx)("hr",{})]})}))})},A=function(e){var t=e.film;return Object(s.jsxs)("div",{style:{paddingRight:"10px",maxWidth:"35%"},children:[Object(s.jsxs)("h3",{children:[Object(s.jsx)("b",{children:t.title}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{style:{fontSize:"20px"},children:Object(s.jsx)("i",{children:t.year})})]}),Object(s.jsx)("hr",{}),Object(s.jsx)("h4",{children:"Synopsis"}),Object(s.jsx)("p",{children:t.synopsis}),Object(s.jsx)("br",{}),Object(s.jsx)("h4",{children:"Starring"}),Object(s.jsx)("p",{children:t.starring})]})},N=function(e){var t=e.reading,n=e.filmTitle,i=e.filmYear,r=e.functionTitle,a=e.functionAuthor;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:t}),Object(s.jsx)("h5",{children:Object(s.jsx)("input",{type:"text",name:"currentTitle",style:{border:"none",fontWeight:"bold"},onChange:r,defaultValue:n})}),Object(s.jsx)("h5",{children:Object(s.jsx)("input",{type:"text",name:"currentAuthor",style:{border:"none",fontStyle:"italic"},defaultValue:i,onChange:a})}),Object(s.jsx)("hr",{})]})},R=!1,L=function(){var e=Object(i.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1];return R=function(){return a(!0)},Object(s.jsx)("div",{children:n?Object(s.jsx)("div",{style:{padding:"5px"},children:Object(s.jsx)(I.a,{initialValues:{title:"",year:""},onSubmit:function(e){!function(e){var t=m.a.database().ref("/suggestions").push().key;m.a.database().ref("/suggestions/"+t).set({id:t,year:e.year,title:e.title})}(e)},children:function(e){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)(k,{props:e,formikKey:"title",placeholder:"Title:"}),Object(s.jsx)(k,{props:e,formikKey:"year",placeholder:"Year:"}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:e.handleSubmit,children:"Submit"})})]})})}})}):null})},P=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(b.a)(this,n),e=t.call(this),m.a.apps.length||m.a.initializeApp(f),e.state={films:[],nextFilm:["",""],signedInUser:"",suggestions:[]},e}return Object(h.a)(n,[{key:"getNextFilm",value:function(){var e=Object(u.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.database().ref("/upNext");case 2:e.sent.on("value",(function(e){var n=Object.values(e.val());t.setState({nextFilm:n})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSuggestions",value:function(){var e=Object(u.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.database().ref("/suggestions");case 2:e.sent.on("value",(function(e){var n=Object.values(e.val());t.setState({suggestions:n})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFilms",value:function(){var e=this;m.a.database().ref("/films").on("value",(function(t){var n=t.val(),s=Object.values(n);e.setState({films:s})}))}},{key:"getSignedInUser",value:function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().currentUser;case 2:null!==(t=e.sent)&&this.setState({signedInUser:t.displayName});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSuggestion",value:function(e){m.a.database().ref("/suggestions/"+e).remove()}},{key:"componentDidMount",value:function(){this.getFilms(),this.getSignedInUser(),this.getNextFilm(),this.getSuggestions()}},{key:"render",value:function(){var e=this,t=this.state.films,n=this.state.suggestions;return Object(s.jsxs)("div",{style:{paddingLeft:"10px",display:"flex"},children:[Object(s.jsxs)("div",{style:{maxWidth:"320px",borderRight:"1px solid black",padding:"10px"},children:[Object(s.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to Film Club ",this.state.signedInUser?this.state.signedInUser:""]}),Object(s.jsx)("hr",{}),Object(s.jsx)(N,{reading:"Up Next:",filmTitle:this.state.nextFilm[0],filmYear:this.state.nextFilm[1],functionTitle:function(e){return t=e.target.value,void m.a.database().ref("/upNext").update({title:t});var t},functionYear:function(e){return t=e.target.value,void m.a.database().ref("/upNext").update({year:t});var t}}),Object(s.jsx)("h2",{children:"Suggestions:"}),n.map((function(t){var n=t.id;return Object(s.jsx)("div",{children:Object(s.jsxs)("h5",{children:[Object(s.jsx)("b",{children:t.title}),Object(s.jsx)("br",{}),Object(s.jsx)("i",{children:t.year}),Object(s.jsx)("div",{style:{cursor:"point"},onClick:e.deleteSuggestion.bind(null,n),children:Object(s.jsx)(C.c,{icon:"minus",size:"1x"})})]})})})),Object(s.jsx)(L,{}),Object(s.jsx)("button",{onClick:R,children:Object(s.jsx)(C.c,{icon:"plus",size:"1x"})})]}),Object(s.jsx)("div",{style:{padding:"10px"}}),Object(s.jsx)("div",{children:t.map((function(t){var n=Object.values(t.comments).slice().sort((function(e,t){return t.date-e.date})),i=t.id;return Object(s.jsxs)("div",{style:{paddingRight:"20px"},children:[Object(s.jsxs)("div",{style:{display:"flex",width:"100%",border:"1px solid black",borderRadius:"5px",padding:"10px"},children:[Object(s.jsx)(A,{film:t}),Object(s.jsx)("div",{style:{borderLeft:"1px solid black",paddingRight:"10px"}}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{children:"Discussion"}),0===n.length?Object(s.jsx)("div",{children:Object(s.jsx)("i",{children:"No one has anything to say about this film...yet!"})}):Object(s.jsx)(T,{filmId:i,signedInUser:e.state.signedInUser,comments:n}),Object(s.jsx)(U,{filmId:i,userId:e.state.signedInUser})]})]}),Object(s.jsx)("div",{style:{padding:"10px"}})]})}))})]})}}]),n}(i.Component),B=m.a.database().ref("/books").push().key;var W=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).state={},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{style:{textAlign:"center"},children:"Add New Film Review"}),Object(s.jsx)(I.a,{initialValues:{comment:""},onSubmit:function(t){!function(e){m.a.database().ref("/films/"+B).set({id:B,year:e.year,synopsis:e.synopsis,starring:e.starring,title:e.title,comments:0})}(t),e.props.history.push("/")},children:function(e){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)("div",{style:{textAlign:"center"},children:[Object(s.jsx)(k,{props:e,label:"Title",formikKey:"title",placeholder:"Title:"}),Object(s.jsx)(k,{props:e,label:"Year",formikKey:"year",placeholder:"Year:"}),Object(s.jsx)(S,{props:e,formikKey:"synopsis",label:"Synopsis",placeholder:"Summarise for us:",style:{height:"100px",overflowWrap:"breakWord"}}),Object(s.jsx)(k,{props:e,formikKey:"starring",label:"Starring",placeholder:"List the actors:"}),Object(s.jsx)("button",{onClick:e.handleSubmit,children:"Submit"})]})})}})]})}}]),n}(i.Component);function z(){return(z=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.auth().signInWithEmailAndPassword(t.email,t.password).then((function(e){var t=e.user;alert("Thanks for logging in "+t.displayName+"!"),console.log("User logged in successfully.")})).catch((function(e){var t=e.code,n=e.message;"auth/wrong-password"===t?alert("Incorrect password."):alert(n),console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{style:{padding:"20px"},children:Object(s.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[Object(s.jsx)("h1",{children:"Sign Up Here"}),Object(s.jsx)(I.a,{initialValues:{email:"",password:"",confirmPassword:"",username:""},onSubmit:function(t,n){!function(e){m.a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){m.a.database().ref("users/"+t.user.uid).set({uid:t.user.uid,username:e.username,email:e.email}).then(m.a.auth().onAuthStateChanged((function(t){t&&t.updateProfile({displayName:e.username})})))})).then((function(e){window.alert("Thanks for registering :)")}))}(t),setTimeout((function(){n.setSubmitting(!1)}),1e3),e.props.history.push("/login")},children:function(e){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)(k,{props:e,label:"Email",formikKey:"email",placeholder:"Email:"}),Object(s.jsx)(k,{props:e,label:"Username",formikKey:"username",placeholder:"Username:"}),Object(s.jsx)(w,{props:e,label:"Password",formikKey:"password",placeholder:"Password:"}),Object(s.jsx)(w,{props:e,label:"Confirm password",formikKey:"confirmPassword",placeholder:"Please confirm password:"}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:e.handleSubmit,children:"REGISTER"})})]})})}})]})})}}]),n}(i.Component),E=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(b.a)(this,n),(s=t.call(this,e)).state={password:"",signedInUser:""},s}return Object(h.a)(n,[{key:"getSignedInUser",value:function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().currentUser;case 2:null!==(t=e.sent)&&this.setState({signedInUser:t.displayName});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getSignedInUser()}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{style:{padding:"20px"},children:Object(s.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[Object(s.jsx)("h1",{children:"Log In"}),this.state.signedInUser?Object(s.jsx)("div",{children:Object(s.jsx)("h2",{children:"You're already logged in, gal!"})}):Object(s.jsxs)("div",{children:[Object(s.jsx)(I.a,{initialValues:{email:"",password:""},onSubmit:function(t,n){!function(e){z.apply(this,arguments)}(t),setTimeout((function(){n.setSubmitting(!1)}),2e3),e.props.history.push("/")},children:function(e){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)("div",{style:{display:""},children:[Object(s.jsx)(k,{props:e,label:"Email",formikKey:"email",placeholder:"Email:"}),Object(s.jsx)(w,{props:e,label:"Password",formikKey:"password",placeholder:"Password:"}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:e.handleSubmit,children:"LOGIN"})})]})})}}),Object(s.jsxs)("h4",{style:{paddingTop:"15px"},children:["Don't have an account? ",Object(s.jsx)(l.b,{to:"/register",children:" Sign up"})]})]})]})})}}]),n}(i.Component),Y=n.p+"static/media/filmClubLogo.b4471b2c.jpg",V=(n(114),n(115),n(65),n(66),{textDecoration:"none",paddingRight:"20px"}),G=function(){return Object(s.jsxs)("div",{style:{paddingTop:"10px",paddingBottom:"10px"},children:[Object(s.jsxs)("div",{style:{display:"flex",padding:"10px",paddingLeft:"10px",paddingTop:"20px"},children:[Object(s.jsx)(l.b,{to:"",style:V,children:Object(s.jsx)("img",{src:Y,style:{width:"100px",height:"100px",borderRadius:"48px"}})}),Object(s.jsx)("div",{style:{paddingRight:"20px",marginLeft:"20px",width:"100px",textAlign:"center"},children:Object(s.jsxs)(l.b,{to:"/add",className:"link",children:[Object(s.jsx)(C.c,{icon:"plus",size:"3x"}),Object(s.jsx)("h5",{children:"Add New Review"})]})}),Object(s.jsx)("div",{style:{width:"100px",textAlign:"center"},children:Object(s.jsxs)(l.b,{to:"/login",className:"link",children:[Object(s.jsx)(C.c,{icon:"user",size:"3x"}),Object(s.jsx)("h5",{children:"Login/Register"})]})}),Object(s.jsx)("div",{style:{paddingLeft:"600px",paddingTop:"40px"},children:Object(s.jsx)("h4",{children:Object(s.jsx)("b",{children:"Thursdays at 7pm"})})})]}),Object(s.jsx)("hr",{})]})},M=n.p+"static/media/logo.6ce24c58.svg";function q(){try{m.a.auth().signOut(),console.log("User logged out successfully."),window.location.reload()}catch(e){console.error(e)}}var J=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("hr",{}),Object(s.jsx)("div",{style:{textAlign:"center"},children:Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{onClick:q,style:{cursor:"pointer"},className:"signOut",children:"Sign Out"}),Object(s.jsx)("br",{}),"Created with React.js ",Object(s.jsx)("img",{src:M,style:{width:"40px",height:"40px"}}),Object(s.jsx)("br",{}),(new Date).getFullYear()]})})]})};var H=function(){function e(){return Object(s.jsx)("div",{children:Object(s.jsxs)(l.a,{basename:"/bookclub",children:[Object(s.jsx)(G,{}),Object(s.jsxs)(o.c,{children:[Object(s.jsx)(o.a,{exact:!0,path:"/",component:P}),Object(s.jsx)(o.a,{path:"/add",component:W}),Object(s.jsx)(o.a,{path:"/register",component:D}),Object(s.jsx)(o.a,{path:"/login",component:E})]}),Object(s.jsx)(J,{})]})})}return Object(s.jsx)("div",{children:Object(s.jsx)(e,{})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),i(e),r(e),a(e)}))};c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(H,{})}),document.getElementById("root")),Q()},66:function(e,t,n){},80:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.fc81f42d.chunk.js.map